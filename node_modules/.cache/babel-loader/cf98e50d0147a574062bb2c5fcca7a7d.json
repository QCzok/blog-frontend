{"ast":null,"code":"import _toConsumableArray from\"/home/dci/Desktop/blog/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/home/dci/Desktop/blog/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/dci/Desktop/blog/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/dci/Desktop/blog/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Switch,Route,Redirect}from\"react-router-dom\";import Header from\"./components/Header\";import Message from\"./components/Message\";import Posts from\"./components/Posts\";import Post from\"./components/Post\";import PostForm from\"./components/PostForm\";import NotFound from\"./components/NotFound\";import Login from\"./components/Login\";import\"./App.css\";var axios=require(\"axios\").default;var App=function App(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),message=_useState4[0],setMessage=_useState4[1];var setFlashMessage=function setFlashMessage(message){setMessage(message);setTimeout(function(){setMessage(null);},1600);};var getPosts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var postsdata;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"http://localhost:3001/posts\");case 2:postsdata=_context.sent;console.log(postsdata.data);setPosts(postsdata.data);case 5:case\"end\":return _context.stop();}}},_callee);}));return function getPosts(){return _ref.apply(this,arguments);};}();useEffect(function(){return getPosts();},[]);var getNewSlugFromTitle=function getNewSlugFromTitle(title){return encodeURIComponent(title.toLowerCase().split(\" \").join(\"-\"));};var addNewPost=function addNewPost(post){post.id=posts.length+1;post.slug=getNewSlugFromTitle(post.title);if(post.title.length<5){alert(\"post not accepted, keep trying\");}else{setPosts([].concat(_toConsumableArray(posts),[post]));setFlashMessage(\"saved\");}};var updatePost=function updatePost(post){post.slug=getNewSlugFromTitle(post.title);var index=posts.findIndex(function(p){return p.id===post.id;});var oldPosts=posts.slice(0,index).concat(posts.slice(index+1));var updatedPosts=[].concat(_toConsumableArray(oldPosts),[post]).sort(function(a,b){return a.id-b.id;});setPosts(updatedPosts);setFlashMessage(\"updated\");};return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(Header,null),message&&/*#__PURE__*/React.createElement(Message,{type:message}),/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/\",render:function render(){return/*#__PURE__*/React.createElement(Posts,{posts:posts});}}),/*#__PURE__*/React.createElement(Route,{path:\"/post/:postSlug\",render:function render(props){var post=posts.find(function(post){return post.slug===props.match.params.postSlug;});if(post){return/*#__PURE__*/React.createElement(Post,{post:post});}else{return/*#__PURE__*/React.createElement(Redirect,{to:\"/\"});}}}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/new\",render:function render(){return/*#__PURE__*/React.createElement(PostForm,{addNewPost:addNewPost,post:{id:0,slug:\"\",title:\"\",content:\"\"}});}}),/*#__PURE__*/React.createElement(Route,{path:\"/login\",component:Login}),/*#__PURE__*/React.createElement(Route,{path:\"/edit/:postSlug\",render:function render(props){var post=posts.find(function(post){return post.slug===props.match.params.postSlug;});if(post){return/*#__PURE__*/React.createElement(PostForm,{updatePost:updatePost,post:post});}else{return/*#__PURE__*/React.createElement(Redirect,{to:\"/\"});}}}),/*#__PURE__*/React.createElement(Route,{component:NotFound})));};// function App () {\n//   return (\n//   <div>\n//     <Switch>\n//       <Route path=\"/login\" component={Login}/>\n//       <Route component={NotFound} />\n//     </Switch>\n//   </div>)\n// }\nexport default App;","map":{"version":3,"sources":["/home/dci/Desktop/blog/Frontend/src/App.js"],"names":["React","useState","useEffect","Switch","Route","Redirect","Header","Message","Posts","Post","PostForm","NotFound","Login","axios","require","default","App","props","posts","setPosts","message","setMessage","setFlashMessage","setTimeout","getPosts","get","postsdata","console","log","data","getNewSlugFromTitle","title","encodeURIComponent","toLowerCase","split","join","addNewPost","post","id","length","slug","alert","updatePost","index","findIndex","p","oldPosts","slice","concat","updatedPosts","sort","a","b","find","match","params","postSlug","content"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n  Switch,\n  Route,\n  Redirect,\n} from \"react-router-dom\";\nimport Header from \"./components/Header\";\nimport Message from \"./components/Message\";\nimport Posts from \"./components/Posts\";\nimport Post from \"./components/Post\";\nimport PostForm from \"./components/PostForm\";\nimport NotFound from \"./components/NotFound\";\nimport Login from \"./components/Login\";\n\nimport \"./App.css\";\n\nconst axios = require(\"axios\").default;\n\nconst App = (props) => {\n  const [posts, setPosts] = useState([]);\n  const [message, setMessage] = useState(null);\n\n  const setFlashMessage = (message) => {\n    setMessage(message);\n    setTimeout(() => {\n      setMessage(null);\n    }, 1600);\n  };\n\n  const getPosts = async () => {\n    const postsdata = await axios.get(\"http://localhost:3001/posts\")\n    console.log(postsdata.data);\n\n    setPosts(postsdata.data);\n  }\n\n  useEffect(()=> getPosts(),[])\n  \n\n  const getNewSlugFromTitle = (title) =>\n    encodeURIComponent(title.toLowerCase().split(\" \").join(\"-\"));\n\n  const addNewPost = (post) => {\n    post.id = posts.length + 1;\n    post.slug = getNewSlugFromTitle(post.title);\n    if(post.title.length < 5) {\n      alert (\"post not accepted, keep trying\")\n    } else {\n      setPosts([...posts, post]);\n      setFlashMessage(`saved`);\n    }\n  };\n\n  const updatePost = (post) => {\n    post.slug = getNewSlugFromTitle(post.title);\n    const index = posts.findIndex((p) => p.id === post.id);\n    const oldPosts = posts.slice(0, index).concat(posts.slice(index + 1));\n    const updatedPosts = [...oldPosts, post].sort((a, b) => a.id - b.id);\n    setPosts(updatedPosts);\n    setFlashMessage(`updated`);\n  };\n\n  return (\n      <div className=\"App\">\n        <Header />\n        \n        {message && <Message type={message} />}\n        <Switch>\n          <Route exact path=\"/\" render={() => <Posts posts={posts} />} />\n          <Route\n            path=\"/post/:postSlug\"\n            render={(props) => {\n              const post = posts.find(\n                (post) => post.slug === props.match.params.postSlug\n              );\n              if (post) {\n                return <Post post={post} />;\n              } else {\n                return <Redirect to=\"/\" />;\n              }\n            }}\n          />\n          <Route\n            exact\n            path=\"/new\"\n            render={() => (\n              <PostForm\n                addNewPost={addNewPost}\n                post={{ id: 0, slug: \"\", title: \"\", content: \"\" }}\n              />\n            )}\n          />\n\n          <Route path=\"/login\" component={Login}/>\n\n          \n          <Route\n            path=\"/edit/:postSlug\"\n            render={(props) => {\n              const post = posts.find(\n                (post) => post.slug === props.match.params.postSlug\n              );\n              if (post) {\n                return <PostForm updatePost={updatePost} post={post} />;\n              } else {\n                return <Redirect to=\"/\" />;\n              }\n            }}\n          />\n          <Route component={NotFound} />\n        </Switch>\n      </div>\n  );\n};\n\n// function App () {\n//   return (\n//   <div>\n//     <Switch>\n//       <Route path=\"/login\" component={Login}/>\n//       <Route component={NotFound} />\n//     </Switch>\n//   </div>)\n\n// }\n\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}